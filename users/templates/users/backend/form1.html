{% extends "users/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<link rel="stylesheet" href="{% static 'submit.css' %}">
<div id="form-root">
    <div class="header">
        <h1>Submission</h1>
    </div>
    <div id='content'>
        <form action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form|crispy }}
            <input type="submit" type="Submit"/>
        </form>
    </div>
    <div class="past-submission"><h2> Past Submissions</h2></div>
    <table>
        <thead>
          <tr>
            <th>Image name</th>
            <th>File name</th>
            <th>User</th>
            <th>Uploaded</th>
          </tr>
        </thead>
        <tbody>
          {% for obj in submissions %}
            <tr>
              <td><a href="{{ obj.img_url }}" download> {{ obj.img }} </a></td>
              <td><a href="{{ obj.raw_url }}"> {{ obj.raw }} </a></td>
              <td>{{ obj.user }}</td>
              <td>{{ obj.time }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="3">No Past Submissions</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
</div>

{% endblock content %}